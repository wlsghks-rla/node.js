<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <table border="2">
      <tr>
        <th>발신</th>
        <td><input type="email" name="sender" /></td>
      </tr>
      <tr>
        <th>수신</th>
        <td><input type="email" name="receiver" /></td>
      </tr>
      <tr>
        <th>제목</th>
        <td><input type="email" name="subject" /></td>
      </tr>
      <tr>
        <th>내용</th>
        <td><input type="email" name="title" /></td>
      </tr>
      <td colspan="2" align="center">
        <button onclick="sendMailFunc()">보내기</button>
      </td>
    </table>

    <script>
      function sendMailFunc() {
        let from = document.querySelector('input[name = "sender"]').value;
        let to = document.querySelector('input[name = "receiver"]').value;
        let subject = document.querySelector('input[name = "subject"]').value;
        let title = document.querySelector('input[name = "title"]').value;
        fetch("/email", {
          method: "post",
          headers: { "content-Type": "application/json;charset=utf-8" },
          body: JSON.stringify({
            from,
            to,
            subject,
            title,
          }),
        }) //
          .then((resp) => resp.json())
          .then((result) => {
            alert(result.retMsg.msg);
          })
          .catch((err) => {
            console.log(err);
          });
      }
    </script>
  </body>
</html>
